/*! Minified JavaScript created in Discovery 4.3.0. 2016-01-26 */
function RandomAsset(a){if("[object Array]"===Object.prototype.toString.call(a)){var b=a[Math.floor(Math.random()*a.length)];this.title=b.title||null,this.catRef=b.catRef||null,this.src=b.src||null,this.relatedLink=b.relatedLink||null,this.linkTitle=b.linkTitle||null}}$.fadeToggler=function(a){var b,c,d;b=$(a.focussedElement),c=$(a.elementToFade),d=a.milliseconds,Modernizr.testProp("opacity")?(b.focus(function(){c.addClass("shown")}),b.blur(function(){c.removeClass("shown")})):(c.hide(),b.focus(function(){c.fadeIn(500)}),b.blur(function(){c.fadeOut(500)}))},$.polyfillPlaceholder=function(a){var b,c;b=$(a.targetElement),c=b.attr("placeholder"),b.length&&!Modernizr.input.placeholder&&(b.val(c),b.on("focus",function(){b.val()===c&&b.val("")}),b.on("blur",function(){b.val()||b.val(c)}))},$.displayFetchedContent=function(a){var b,c;return b=a.content||!1,c=a.targetElement||!1,b&&c?($(c).replaceWith(b),!0):!1},$.fetchWithAjax=function(a){cacheOrRetrieveSearchTerm();var b,c,d;return c=a.targetElement||!1,b=a.urlToGET||!1,b&&b?(d=$.ajax({url:b,cache:!1,success:function(a){$.displayFetchedContent({content:a,targetElement:c}),$(document).trigger("homePageUpdated"),cacheOrRetrieveSearchTerm()}}),!0):!1},$.showExpander=function(){$(".expander").length&&$(".expander").delay(200).slideDown(400)},$.setUpCheckboxTogglers=function(){$("#toggler").length&&($("#toggler").on("change",function(){$("#toggler").prop("checked")?$(".togglee").prop("checked",!0):$(".togglee").prop("checked",!1)}),$(".togglee").on("change",function(){this.checked&&$("#toggler").prop("checked",!0)})),$(".clearTogglees").length&&$(".clearTogglees").on("change",function(){$(".togglee").prop("checked",!1)})},$.customEventer=function(a){var b=a.elementIdOrClass,c=a.eventToWatch,d=a.customEventToTrigger;$(document).on(c,b,function(){$(document).trigger(d)})};var cacheOrRetrieveSearchTerm=function(){cacheOrRetrieveSearchTerm.term||(cacheOrRetrieveSearchTerm.term=""),$("#mainSearch").val()&&(cacheOrRetrieveSearchTerm.term=$("#mainSearch").val()),$("#mainSearch").val(cacheOrRetrieveSearchTerm.term)};$.setUpRadioRelationships=function(){$(".radioLeader, .squashRadioFollowers").on("change",function(){$(".radioLeader").prop("checked")?$(".radioFollower").prop("checked",!0):$(".inRadioFollowerGroup").prop("checked",!1)}),$(".inRadioFollowerGroup").on("change",function(){$(".radioLeader").prop("checked",!0)})},$.bindToggle=function(a){var b=$.extend({},$.bindToggle.defaults,a);b.hideTargetOnLoad===!0&&$(b.target).hide(),$(document).on("click",b.toggler,function(a){var c,d=$(this);switch(a.preventDefault(),c=b.contextual===!0?$(this).parent().find(b.target):$(b.target),b.type){case"slide":c.slideToggle("fast");break;default:c.toggle()}d.addClass("hasBeenInteractedWith"),d.toggleClass(b.togglerClass)})},$.bindToggle.defaults={togglerClass:"expanded",hideTargetOnLoad:!0,type:!1,contextual:!1},RandomAsset.prototype.backstretchIt=function(a,b){$(a).backstretch(this.src),b&&$(b).html(this.title+" <a href='"+this.relatedLink+"' title='Image of "+this.title+" Catalogue reference: "+this.catRef+"'>"+this.catRef+"</a>")},RandomAsset.prototype.insertAsHTMLImage=function(a,b){$("<img>",{src:this.src,title:this.title}).appendTo($(a)),b&&$(b).html(this.title+" <a href='"+this.relatedLink+"' title='"+this.linkTitle+"'>"+this.catRef+"</a>")},$.toggleDisplayOfElement=function(a){$(a.togglee).toggle(),$(a.toggler).toggleClass("expanded")},$.fn.tabify=function(a){var b=$.extend({},$.fn.tabify.defaults,a);return $('[role="tabpanel"]:not(:first)').hide(),this.eq(0).addClass(b.classForSelectedTab),this.each(function(){var a=$(this),c=a.attr("id");a.on("click",function(d){var e=$('[role="tablist"] li'),f=$('[role="tabpanel"]'),g=$('[aria-labelledby="'+c+'"]');d.preventDefault(),e.removeClass(b.classForSelectedTab).attr("aria-selected",!1),a.addClass(b.classForSelectedTab).attr("aria-selected",!0),f.hide().attr("aria-hidden",!0),g.show().attr("aria-hidden",!1)})})},$.fn.tabify.defaults={classForSelectedTab:"selected"},$.fn.restrictText=function(a){var b=$.extend({},$.fn.restrictText.defaults,a);return b.showHide&&$(document.body).on("click","a.read-more",function(a){var b=$(this),c=b.prev();a.preventDefault(),"Hide"===b.text()?(c.text(c.data("restricted-text")),b.text("Read more")):(c.text(c.data("full-text")),b.text("Hide"))}),this.each(function(){$this=$(this);var a=$this.text();if(a.length>b.restrictTo){$this.data("full-text",a);var c=$this.data("full-text").substring(0,b.restrictTo).lastIndexOf(" ");$this.data("restricted-text",$this.data("full-text").substring(0,c)+"..."),$this.text($this.data("restricted-text")),b.showHide&&$this.after($('<a class="read-more" href="#">Read more</a><div class="clr"></div>'))}})},$.fn.restrictText.defaults={restrictTo:150,showHide:!1};var tnaLogger=function(a){if(console&&console.log)if("string"==typeof a)console.log(a);else for(var b in a)console.log(a[b])},indexOf=function(a){return indexOf="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b=-1,c=-1;for(b=0;b<this.length;b++)if(this[b]===a){c=b;break}return c},indexOf.call(this,a)};$.fn.filterBehaviours=function(a){var b=$.extend({},$.fn.filterBehaviours.defaults,a),c=0;return $.ariaShow=function(a){a.slideDown(300),a.attr("aria-hidden",!1)},$.ariaHide=function(a){a.slideUp(300),a.attr("aria-hidden",!0)},this.each(function(){var a=$(this),d=a.find(".filter-toggler"),e=a.find(".filter-togglee");d.addClass("expanded"),$.ariaShow(e),c++,c>b.hideAfter&&(d.toggleClass("expanded"),$.ariaHide(e)),d.on("click",function(a){a.preventDefault(),d.toggleClass("expanded");var b=d.hasClass("expanded");b===!0?$.ariaShow(e):$.ariaHide(e)})})},$.fn.filterBehaviours.defaults={hideAfter:3},tnaSetThisCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+864e5*b),document.cookie=a+"=true;path=/;expires="+c.toGMTString()+";"},tnaCheckForThisCookie=function(a){return-1===document.cookie.indexOf(a)?!1:!0},$(document).on("click","#cookieCutter",function(a){a.preventDefault(),tnaSetThisCookie("dontShowCookieNotice",365),$(".cookieNotice").hide()}),$.bindToggle({toggler:"#mega-menu-pull-down button",target:".mega-menu",type:"slide"}),$.bindToggle({toggler:"#search-expander",target:"#mobile-search-outer-wrapper"}),$.bindToggle({toggler:"#show-more-options",target:"#more-options"}),$.bindToggle({toggler:"#options-button",target:"#search-options-outer-wrapper"}),$.bindToggle({toggler:"#signInLink",target:"#signedFormWrapper"}),$.bindToggle({toggler:"#miniBasketLink",target:"#miniBasketWrapper"}),$.bindToggle({toggler:"#expandOrderOptionSupplementals",target:"#orderOptionSupplementals",hideToggleeOnLoad:"false"}),$.customEventer({elementIdOrClass:"#tnaSearch",eventToWatch:"focus",customEventToTrigger:"toggleSearchOptionsOnce"}),$.customEventer({elementIdOrClass:"#scope-selector",eventToWatch:"click",customEventToTrigger:"toggleSearchOptions"}),$.customEventer({elementIdOrClass:".formDestinationChanger",eventToWatch:"click",customEventToTrigger:"changeFormDestination"}),$(document).on("click","#cookieCutter",function(a){a.preventDefault(),tnaSetThisCookie("dontShowCookieNotice",365),$(".cookieNotice").hide()}),$(document).on("click",".mega-menu h3",function(a){$(window).width()<480&&($(this).parents("nav").find("ul").slideToggle(),$(this).toggleClass("expanded"),a.preventDefault())}),$("#search-options-inner-wrapper").length&&($(document).on("click","#search-options-inner-wrapper h4",function(){$(this).toggleClass("expanded").next().slideToggle()}),$("#search-options-inner-wrapper .field-validation-error").length&&$("#options-button").trigger("click")),$(window).on({resize:function(){$(window).width()>480&&$(".mega-menu ul").show()}}),$(document).one("toggleSearchOptionsOnce",function(){$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"})}),$(document).on("toggleSearchOptions",function(){$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"}),$(document).off("toggleSearchOptionsOnce")}),$(".formDestinationChanger").on("click",function(){var a=$(this).attr("data-placeholder"),b=$(this).attr("data-target"),c=$(this).attr("data-fieldName");$.toggleDisplayOfElement({toggler:"#scope-selector",togglee:"#search-options"}),$("#tnaSearch").attr({placeholder:a,name:c}),$("#globalSearch").attr("action",b)}),$(document).on("change",".mobileSearchDestinationOption",function(){var a=$(this).attr("data-target"),b=$(this).attr("data-placeholder"),c=$(this).attr("data-fieldName");$("#mobile-search-field").attr({placeholder:b,name:c}).focus(),$("#mobile-global-search").attr("action",a)}),$(document).on("change","#sortDrop",function(){$(this).closest("form").submit()}),$(".radioLeader, .squashRadioFollowers").on("change",function(){$(".radioLeader").prop("checked")?$(".radioFollower").prop("checked",!0):$(".inRadioFollowerGroup").prop("checked",!1)}),$(".inRadioFollowerGroup").on("change",function(){$(".radioLeader").prop("checked",!0)}),function(){if(void 0!==Modernizr){var a=new Image;a.onload=a.onerror=function(){var a=this;Modernizr.addTest("datauri",function(){return 1===a.width&&1===a.height})},a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}(),$(function(){if($.polyfillPlaceholder({targetElement:"#tnaSearch"}),$.polyfillPlaceholder({targetElement:"#query"}),$("<span>",{html:"&nbsp;",id:"search-expander"}).css({position:"absolute",right:"5px"}).appendTo("#logo-holder"),tnaCheckForThisCookie("dontShowCookieNotice")||($('<div class="cookieNotice">We use cookies to improve services and ensure they work for you. Read our <a href="http://www.nationalarchives.gov.uk/legal/cookies.htm">cookie policy</a>. <a href="#" id="cookieCutter">Close</a></div>').css({padding:"5px","text-align":"center",backgroundColor:"#FCE45C",position:"fixed",bottom:0,"font-size":"14px",width:"100%",display:"none"}).appendTo("body"),setTimeout(function(){$(".cookieNotice").slideDown(1e3)},1e3)),$("#sort-form select:disabled").length){var a=$("#sort-form").find(".emphasis-block");a.remove(),a.insertAfter("#search-control-panel")}});